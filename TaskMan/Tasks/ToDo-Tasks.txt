Файл рабочих задач для проекта Tasks - Приложение менеджера задач.

02 декабря 2022 - создание проекта

12 декабря 2022
- создание главной формы, по причине необходимости реализовать Процесс запуска приложения.
  + добавлено главное меню и обработчики для его пунктов.
    - не все обработчики главного меню добавлены пока.
  + добавлен тулбар для быстрых кнопок главой формы
    - пока пустой, надо добавить кнопки и разделители по мере выявления потребности в них.
  + добавлен статусбар главной формы.
  + добавлена функция изменения текста заголовка главной формы.
  + добавлена функция изменения текста статусбара главной формы.
  + добавлена функция вывода диалога сообщения об ошибке.
  + добавлена функция запуска файла справки "Справка.chm" из каталога приложения.
    - надо добавить в проект  болванку файла справки, чтобы оно работало.
  + добавлены обработчики FormLoad, FormClosing, FormClosed.
    - Пока они пустые
  - в левую половину главной формы добавлен TreeView,
    - надо настроить свойства контрола
    - надо привязать события контрола.
    - надо привязать к контролу колекцию иконок с правильными тегами.
      - надо внести эти теги и индексы иконок в документацию проекта.
    - надо привязать к контролу контекстное меню 
      - для него нужны иконки?
      - для каждого типа элемента - свое контекстное меню нужно.
- придумать, что поставить в правую половину главной формы.
  - там должно быть Список Сегодня. Но я пока не знаю, как егореализовать.
    - нужно провести макетирование представления Список Сегодня.
- надо впихать в проект мой контрол текстового редактора или сделать его тут заново.
- надо добавить настройки в файл настроек приложения.
  + AutoStartStorage - поле пути к автооткрываемому хранилищу.
    - надо убедиться, что пользователь может назначить этот путь к Хранилищу через GUI. 
      - и путь должен проверяться на правильность перед назвначением, а не после.
  - хранение последних открытых Хранилищ и флаг, запоминать ли их.

13 декабря 2022
- добавил в проект файлы-заготовки:
  - Лицензионное соглашение.txt
    - надо заменить ХХХ на название программы.
  - Справка.chm
    - это пустая болванка, ее надо заменить нормальной справкой.
      - надо написать веб-страницы по шаблону и скомпилировать в такой файл справки.
      - шаблон лежит в папке C:\Users\1\Documents\gitrepo\Zeta\TaskMan\Документация
- написал код для создания Хранилища, наскоро, только для отладки.
  - добавил форму StorageCreateForm, которая нужна в процессе создания Хранилища.
  - форма StorageShortInfoForm - оказалась пока что лишней, она более подходит для просмотра свойств Хранилища, а не для создания Хранилища.
  - надо проектировать весь процесс создания Хранилища, сейчас он только для отладки остальных процессов.
  + первый тест успешно, Хранилище создано.
- написан код для открытия Хранилища - вроде хорошо, нарисовал блок-схему, описал ее в вики.
  - пометил места для вставки начала и конца диалога бегущего прогресс-бара, чтобы пользователь ожидал загрузки Хранилища при большой БД.
  - первый тест успешно, Хранилище открыто.
- код для закрытия Хранилища вроде бы написан,  наскоро, только для отладки.
  - надо проектировать весь процесс закрытия Хранилища, сейчас он только для отладки остальных процессов.
  - первый тест успешно, Хранилище закрыто.
- надо бы еще создать пункт меню для просмотра и редактирования свойств Хранилища, но пока нет формы с propertyGrid для показа.
- процесс закрытия главного окна не придуман, сейчас все на авось происходит.

15 декабря 2022
- Новый этап проекта: Отображение дерева элементов
  - дерево элементов в Бд уже есть. Надо его показать в:
    - левой панели главного окна
    - отдельном диалоге выбора элементов SelectElementForm.
      + нужен флаг типа элемента для фильтра показываемых элементов.
        + показывать только Категории либо Категории и Теги, либо Категории и Заметки либо Категории и Заметки и Задачи.
        + это флаговый енум, а EnumElementType сейчас не флаговый. 
          + надо переделать EnumElementType во флаговый енум и проверить все места, где он используется.
      + нужен начальный элемент дерева, чтобы не все общее дерево показывать, а только некоторую ветвь.
 - где взять код?
   - Инвентарь  поискать?
   - дипломный проект поискать?
   - есть примеры из МенеджерПроектов, нашел, но как они работают - не знаю.
- тестировать алгоритм лучше на диалоге выбора элементов, там меньше возни, неудачный класс можно просто удалить и все заново начать.

18 декабря 2022
- Дерево элементов из БД отображается в отдельном диалоге выбора элементов SelectElementForm.
  Этот диалог используется как тестовый полигон для коды дерева элементов.
  Переносить в главную форму пока еще рано. Код еще надо пошлифовать.
  - форма не должна показывать удаленные элементы - вроде это сделано.
    - эта форма не годится для показа элементов из Корзины, поскольку они удаленные. Тут нужен другой код?
      - Корзина это виртуальный каталог, там все равно нужен другой код. 
        Но есть проблема: если в корзину складывать удаленные элементы в один ряд, будет непонятно, откуда они.
        А если складывать с каталогами, в этих каталогах не найдешь ничего потом.
        Вариант: удаленному элементу в корзине приписывать путь в дереве, по которому он реально располагается, как описание ноды.
        Но это потребует из БД извлечь все удаленные элементы, для каждого из них построить цепочку ид и текстовый путь.
        Это нагружать Бд будет сильно, наверное. Потом разберусь с этой проблемой.
        TODO: перенести эту проблему в вики а сюда вставить только ссылку на вики. 
        Корзину надо проектировать отдельной темой.
  - форма не должна показывать элементы, которые не указаны в фильтре типа допустимых элементов, кроме категорий, которые соединяют всю структуру.
    - вроде сделано.
  - форма должна возвращать  выбранный элемент только одного из тех типов, которые указаны в фильтре типа допустимых элементов. 
  - форма должна возвращать ид нового выбранного элемента, а пока она ничего не возвращает.
    - а точно ид, а не объект? Объект намного универсальнее, ид из него получить проще, и другие свойства тоже под рукой.
  - форма должна корректно обрабатывать ошибки и не допускать повреждения БД или сеанса БД.
  - форма должна сохранять между показами формы позицию на экране и размер окна.
  - обработчики событий дерева реализованы неправильно. Надо поискать пример в интернете, чтобы потом меньше исправлять.
    - почти правильный пример есть в Инвентарь. Но искать неохота.
      - дизассемблить инвентарь можно, если искать исходники неохота.
- Корзина и другие виртиуальные элементы в этом дереве не реализованы пока что.
  - их можно реализовать в производном классе менеджера дерева, а то многовато тут получается параметров передавать в форму.
- Главная форма неправильно закрывается. Закрытие открытого Хранилища не производится автоматически при закрытии окна.
